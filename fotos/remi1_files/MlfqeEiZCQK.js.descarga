if (self.CavalryLogger) { CavalryLogger.start_js(["+FwyZ"]); }

__d("MarketplaceClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743922");c=b("FalcoLoggerInternal").create("marketplace_click",a);e.exports=c}),null);
__d("MarketplaceImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743925");c=b("FalcoLoggerInternal").create("marketplace_impression",a);e.exports=c}),null);
__d("XMarketplaceHomePageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/marketplace/{?*rest}/",{rest:{type:"String"},ref:{type:"String"},ref_object_id:{type:"Int"},launch_creation:{type:"Bool",defaultValue:!1},query:{type:"String"},seller_profile:{type:"Int"},sold_by:{type:"String"},serp_query:{type:"String"},latitude:{type:"Float"},longitude:{type:"Float"},for_sale_item_id:{type:"FBID"}})}),null);
__d("XMarketplaceNotificationBadgeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/marketplace/badge/",{})}),null);
__d("MMarketplaceTabJewel",["CSS","DOM","MarketplaceClickFalcoEvent","MarketplaceImpressionFalcoEvent","MJewels","MPageController","MRequest","Stratcom","TimeSlice","XMarketplaceHomePageController","XMarketplaceNotificationBadgeAsyncController","formatNumber"],(function(a,b,c,d,e,f){var g,h=0,i,j,k,l=9,m=12e4;function n(){b("CSS").conditionClass(i,"popoverOpen",!0)}function o(){if(j)return;j=b("Stratcom").listen("m:history:change",null,q)}function p(){h=0,s(h),clearTimeout(k),k=null}function q(a){a=a.getData().soft;for(var c=0,d=Object.keys(b("MJewels"));c<d.length;c++)if(b("MJewels")[d[c]]===a){t();return}n()}function r(){if(h>l&&k!==null)return;clearTimeout(k);k=setTimeout(b("TimeSlice").guard(v,"Marketplace jewel count polling",{propagationType:b("TimeSlice").PropagationType.ORPHAN}),m)}function s(a){b("DOM").setContent(g,b("formatNumber").withMaxLimit(a,l)),b("CSS").conditionClass(i,"noCount",a===0),b("CSS").conditionClass(i,"hasCount",a>0)}function t(){b("CSS").conditionClass(i,"popoverOpen",!1)}function u(){j&&(j.remove(),j=null)}function v(){var c=b("XMarketplaceNotificationBadgeAsyncController").getURIBuilder();a=new(b("MRequest"))(c.getURI().toString());a.listen("done",function(a){h=((a=a.payload)==null?void 0:a.count)||0;s(h)});a.listen("finally",function(){a=null,r()});a.send()}function c(a,c){i=a;g=b("DOM").find(i,"span","count");b("Stratcom").listen("m:marketplacetab:load",null,function(){n(),o(),g&&p()});b("Stratcom").listen("m:marketplacetab:unload",null,function(){t(),u(),g&&r()});a=b("XMarketplaceHomePageController").getURIBuilder().getURI();var d=b("MPageController").getRenderedPath();d&&d.startsWith(a.getPath())?(n(),o(),g&&p()):g&&(v(),r());d=c.jewelSigil;b("Stratcom").listen("click",d,function(){b("MarketplaceClickFalcoEvent").log(function(){return{uiComponent:"app_tab",surface:"app_tab"}})});b("MarketplaceImpressionFalcoEvent").log(function(){return{uiComponent:"app_tab",surface:"app_tab"}})}e.exports={init:c}}),null);